FROM nginx:alpine

# Generate a lightweight self-signed cert so HTTPS works even if real certs
# are not yet provisioned. This avoids client failures on 443.
RUN apk add --no-cache openssl && \
    mkdir -p /etc/ssl/private && \
    openssl req -x509 -nodes -days 3650 \
      -newkey rsa:2048 \
      -keyout /etc/ssl/private/selfsigned.key \
      -out /etc/ssl/certs/selfsigned.crt \
      -subj "/CN=djdannyhecticb.com"

COPY nginx-simple.conf /etc/nginx/nginx.conf

